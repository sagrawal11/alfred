# Alfred the Butler Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# COMMUNICATION CONFIGURATION
# =============================================================================
# Communication mode (SMS only via Twilio)
# Uses TwiML for incoming responses, REST API for scheduled messages
COMMUNICATION_MODE=sms

# =============================================================================
# NLP ENGINE CONFIGURATION
# =============================================================================
# NLP Engine (OpenAI primary, Gemini fallback)
NLP_ENGINE=openai

# OpenAI API Key
OPENAI_API_KEY=your_openai_api_key_here

# Optional: OpenAI model selection
# Default: gpt-4.1-mini
OPENAI_MODEL=gpt-4.1-mini

# Optional: OpenAI vision model (used for dashboard image analysis)
# Default: falls back to OPENAI_MODEL
OPENAI_VISION_MODEL=gpt-4.1-mini

# Google Gemini API Key
# Get your API key from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# Optional: Gemini Model Selection
# Default: gemini-3-flash-preview (separate quota from 2.5, good for testing)
# Gemini 3: gemini-3-flash-preview
# Gemini 2.5: gemini-2.5-flash, gemini-2.5-pro, gemini-2.5-flash-lite
# Gemma (higher free quotas): gemma-3-12b-it, gemma-3-4b-it, gemma-3-1b-it
GEMINI_MODEL=gemini-3-flash-preview

# =============================================================================
# TWILIO CONFIGURATION (for SMS)
# =============================================================================
# Get these from Twilio Console Dashboard
TWILIO_ACCOUNT_SID=your_account_sid_here
TWILIO_AUTH_TOKEN=your_auth_token_here
TWILIO_PHONE_NUMBER=+1234567890
# Note: Use a toll-free number (800, 888, 877, etc.) to avoid A2P 10DLC registration

# Your phone number (for scheduled reminders)
YOUR_PHONE_NUMBER=+1234567890

# =============================================================================
# APP SETTINGS
# =============================================================================
# Morning check-in time (24-hour format)
MORNING_CHECKIN_HOUR=8

# Water Bottle Size (in milliliters)
# Default: 500ml (standard water bottle)
# Adjust this to match your actual water bottle size
WATER_BOTTLE_SIZE_ML=500

# =============================================================================
# WEATHER API CONFIGURATION (Optional - for morning check-in)
# =============================================================================
# OpenWeatherMap API Key (free tier available)
# Get your API key from: https://openweathermap.org/api
# Free tier: 60 calls/minute, 1,000,000 calls/month
WEATHER_API_KEY=your_openweathermap_api_key_here

# Weather Location (city name or "City,State,Country")
# Examples: "Durham,NC,US", "New York", "London,GB"
WEATHER_LOCATION=Durham,NC,US

# =============================================================================
# GOOGLE CALENDAR API CONFIGURATION (Optional - for calendar integration)
# =============================================================================
# Get these from Google Cloud Console after setting up OAuth 2.0
# See INSTRUCTIONS/google_calendar.md for detailed setup instructions
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
GOOGLE_REFRESH_TOKEN=your_google_refresh_token_here

# Reminder Follow-up Settings
REMINDER_FOLLOWUP_DELAY_MINUTES=30
REMINDER_AUTO_RESCHEDULE_ENABLED=true

# Task Decay & Cleanup Settings
TASK_DECAY_DAYS=7
TASK_DECAY_ENABLED=true

# Weekly Digest Settings
WEEKLY_DIGEST_DAY=0
WEEKLY_DIGEST_HOUR=20
WEEKLY_DIGEST_ENABLED=true

# Gentle Nudges Settings
GENTLE_NUDGES_ENABLED=true
GENTLE_NUDGE_CHECK_INTERVAL_HOURS=2
GOOGLE_REDIRECT_URI=http://localhost:5001/auth/google/callback

# =============================================================================
# SUPABASE DATABASE CONFIGURATION
# =============================================================================
# Supabase Project URL
# Get this from your Supabase project settings: Settings → API → Project URL
SUPABASE_URL=https://your-project-id.supabase.co

# Supabase API Key
# Get this from your Supabase project settings: Settings → API → Project API keys
# Use the "service_role" key for server-side operations (has full access)
# Or use the "anon" key if you've set up Row Level Security policies
SUPABASE_KEY=your_supabase_service_role_key_here

# =============================================================================
# INTEGRATION CONFIGURATION (Phase 7)
# =============================================================================
# Base URL for OAuth redirects (use your deployment URL in production)
BASE_URL=http://localhost:5001

# Encryption key for OAuth tokens (generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")
ENCRYPTION_KEY=your_encryption_key_here

# Fitbit OAuth (get from https://dev.fitbit.com)
FITBIT_CLIENT_ID=your_fitbit_client_id_here
FITBIT_CLIENT_SECRET=your_fitbit_client_secret_here

# =============================================================================
# NUTRITION APIs (Milestone A)
# =============================================================================
# USDA FoodData Central API key (recommended for generic foods + many branded foods)
# Get a key from: https://fdc.nal.usda.gov/api-guide.html
USDA_FDC_API_KEY=your_usda_fdc_api_key_here

# Open Food Facts base URL (public API; packaged foods, best with barcode)
# Default: https://world.openfoodfacts.org
OPENFOODFACTS_BASE_URL=https://world.openfoodfacts.org

# Nutritionix (optional; great for restaurant/chain/menu-style items)
# Get keys from: https://developer.nutritionix.com/
NUTRITIONIX_APP_ID=your_nutritionix_app_id_here
NUTRITIONIX_API_KEY=your_nutritionix_api_key_here

# Cache TTL for external nutrition lookups (days)
NUTRITION_CACHE_TTL_DAYS=30

# =============================================================================
# DASHBOARD IMAGE UPLOADS (Milestone B)
# =============================================================================
# Supabase Storage bucket name for uploaded food images (labels/receipts/photos)
FOOD_IMAGE_BUCKET=food-uploads

# Max upload size in bytes (default ~6MB)
FOOD_IMAGE_MAX_BYTES=6000000

# Google OAuth (get from Google Cloud Console)
# Note: GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET are already defined above for Calendar
# These are used for both Calendar and Fit integrations

# =============================================================================
# DASHBOARD CONFIGURATION
# =============================================================================
# Password for accessing the web dashboard
# Set a strong password to protect your dashboard
DASHBOARD_PASSWORD=your_password_here

# Flask Secret Key (optional, for session security)
# Generate a random string for production use
# If not set, a default dev key will be used (not secure for production)
FLASK_SECRET_KEY=your_random_secret_key_here

# =============================================================================
# TWILIO SETUP INSTRUCTIONS
# =============================================================================
# 1. Go to https://www.twilio.com and create an account (free trial with $15.50 credit)
# 2. Get your Account SID and Auth Token from Console Dashboard
# 3. Buy a TOLL-FREE number (~$2-3/month) - No A2P 10DLC registration required!
#    - Recommended for personal projects/students
#    - Avoids $8 registration fee + $1.50/month campaign fee
# 4. Set up webhook: https://your-app.com/webhook/twilio or /sms
# 5. Configure webhook in Phone Number settings: "A message comes in"
#
# Estimated monthly cost for 100 messages: ~$2.75-3.75
# - Toll-free number: ~$2-3/month
# - SMS: $0.0075 per message
# - 100 messages = $0.75
# - Total: ~$2.75-3.75/month
# - Trial account: $15.50 free credit (~2,000 SMS messages)
